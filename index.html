<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="./style.css">
		<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
		<title> JQuery Calculator </title>
	</head>
	<body>

		<section id="calculator">
			<div class="display">

			</div>

			<div id="numbersContainer">
				<table id="numbers">
					<tr>
						<td>
							<button class="number" id="one">1</button>
						</td>
						<td>	
							<button class="number" id="two">2</button>
						</td>
						<td>
							<button class="number" id="three">3</button>
						</td>
						<td>
							&nbsp;
						</td>
						<td>
							<button class="operator" id="plus">+</button>
						</td>
						<td>	
							<button class="operator" id="minus">-</button>
						</td>
					</tr>
					<tr>
						<td>
							<button class="number" id="four">4</button>
						</td>
						<td>	
							<button class="number" id="five">5</button>
						</td>
						<td>
							<button class="number" id="six">6</button>
						</td>
						<td>
							&nbsp;
						</td>
						<td>
							<button class="operator" id="divide">/</button>
						</td>
						<td>
							<button class="operator" id="times">x</button>
						</td>
					</tr>
					<tr>
						<td>
							<button class="number" id="seven">7</button>
						</td>
						<td>	
							<button class="number" id="eight">8</button>
						</td>
						<td>
							<button class="number" id="nine">9</button>
						</td>
					</tr>
					<tr>
						<td>
							<button class="number" id="zero">0</button>
						</td>
						<td>
							<button class="dot">.</button>
						</td>
						<td>
							<button class="equals_button" id="equals">=</button>
						</td>
					</tr>
				</table>
			</div>


		</section>

		<script>

		var calculationSum = 0; // the current sum after each input
        var storedCalculation = ""; // what is displayed on the display screen
        var numbersPressed = new Array(); // creates an array to hold the numbers, only two indexes should be used
        var numOfOperatorsPressed = 0; // this is to make sure that not more than one operator was pressed in a row
        var display = $('.display'); // display screen
        var waitingForSecondNumber = false; // tells if we're still waiting for a second number
        var secondNumber = ""; // the second number
        var savedOperator; // a saved operator


        /**
         * Performs that operator(plus, etc.) when it is pressed
         * @param  {[type]} operator  the operator thats pressed
         * @param  {[type]} firstVal  the first Value to be operated on
         * @param  {[type]} secondVal the second value to be operated on
         * @return {[type]}           result of first value and second value after function
         */
        function equalsIsPressed(operator, firstVal, secondVal) {
        	if ( (operator).is($('#plus') ) ) {
        		firstVal += secondVal;
        	} else if ((operator).is($('#minus') ) ) {
        		firstVal -= secondVal;
        	} else if ( (operator).is($('#divide'))) {
        		firstVal /= secondVal;
        	} else {
        		firstVal *= secondVal;
        	}
        	var result = firstVal;
        	return result;
        }

        function equals() {
        	return calculationSum;
        }
        function addToNumbersPressed(valueToBeAdded) {
        	var convertedToFloat = parseFloat(valueToBeAdded);
        	if (numbersPressed[0]) {
        		numbersPressed[1] = convertedToFloat;
        	} else {
        	numbersPressed[0] = convertedToFloat;
        	}
        }

        function displayToScreen(thingToDisplay) {
        	display.html(thingToDisplay);
        }

        function clearNumbersPressedArray() {
        	numbersPressed = new Array();
        }

        function saveOperator(operator) {
        	if (saveOperator) {
        		alert("already has another operator, error!");
        	} else {
        	savedOperator = operator.html();
        	}
        }

        /**
         * Displays it on the display screen
         * @param  {[type]} ) {                        var numberOrOperator [description]
         * @return {[type]}   [description]
         */
        $('.number, .operator, .dot').click(function () {
            var numberOrOperator = $(this).html();
            storedCalculation += numberOrOperator;
            displayToScreen(storedCalculation);
            if ($(this).is('.operator') ) {
            	addToNumbersPressed(storedCalculation);
            	storedCalculation = "";
            	waitingForSecondNumber = true;
            }
         });

        while (waitingForSecondNumber === true) {
        	$('.number').click(function() {
        		var number = $(this).html();
        		storedCalculation += number;
        		displayToScreen(storedCalculation);
        	});
        	$('.operator').click(function(){
        		var operator = $(this).html();
        		saveOperator(operator);
        	});
        	$('.equals_button').click(function() {
        		addToNumbersPressed(storedCalculation);
        		equalsIsPressed(savedOperator, numbersPressed[0], numbersPressed[1]);
        		waitingForSecondNumber = false;
        	});
        }

		</script>

	</body>
</html>
